/*! lazysizes - v3.0.0-rc4 */
!function(){"use strict";if(window.addEventListener){var a=/\s+/g,b=/\s*\|\s+|\s+\|\s*/g,c=/^(.+?)(?:\s+\[\s*(.+?)\s*\])?$/,d=/\(|\)|'/,e={contain:1,cover:1},f=function(a){var b=lazySizes.gW(a,a.parentNode);return a._lazysizesWidth&&!b||(a._lazysizesWidth=b),a._lazysizesWidth},g=function(a){var b;return b=(getComputedStyle(a)||{getPropertyValue:function(){}}).getPropertyValue("background-size"),!e[b]&&e[a.style.backgroundSize]&&(b=a.style.backgroundSize),b},h=function(d,e,g){var h=document.createElement("picture"),i=window.devicePixelRatio||1,k=e.getAttribute(lazySizesConfig.sizesAttr)/i,l=e.getAttribute("data-ratio"),m=e.getAttribute("data-optimumx");e._lazybgset&&e._lazybgset.parentNode==e&&e.removeChild(e._lazybgset),Object.defineProperty(g,"_lazybgset",{value:e,writable:!0}),Object.defineProperty(e,"_lazybgset",{value:h,writable:!0}),d=d.replace(a," ").split(b),h.style.display="none",g.className=lazySizesConfig.lazyClass,1!=d.length||k||(k="auto"),d.forEach(function(a){var b=document.createElement("source");k&&"auto"!=k&&b.setAttribute("sizes",k),a.match(c)&&(b.setAttribute(lazySizesConfig.srcsetAttr,RegExp.$1),RegExp.$2&&b.setAttribute("media",lazySizesConfig.customMedia[RegExp.$2]||RegExp.$2)),h.appendChild(b)}),k&&(g.setAttribute(lazySizesConfig.sizesAttr,k),e.removeAttribute(lazySizesConfig.sizesAttr),e.removeAttribute("sizes")),m&&g.setAttribute("data-optimumx",m),l&&g.setAttribute("data-ratio",l),h.appendChild(g),e.appendChild(h);var n=f(e);j(e,n)},i=function(a){if(a.target._lazybgset){var b=a.target,c=b._lazybgset,e=b.currentSrc||b.src;e&&(c.style.backgroundImage="url("+(d.test(e)?JSON.stringify(e):e)+")"),b._lazybgsetLoading&&(lazySizes.fire(c,"_lazyloaded",{},!1,!0),delete b._lazybgsetLoading)}},j=function(a,b){var c=Array.prototype.filter.call(a.children,function(a){return"PICTURE"===a.tagName})[0],d=c&&c.querySelector("source"),e=d&&d.getAttribute("data-srcset");if(e){var f=e.split(", ").map(function(a){var b=a.match(/([^ ]+) (\d+)/)||[];return{url:b[1],width:parseInt(b[2],10)}});f=f.find(function(a){return a.width===b})?f.filter(function(a){return a.width<=b}):f.reduce(function(a,c){return c.width<=b?a.result.push(c):a.found||(a.result.push(c),a.found=!0),a},{found:!1,result:[]}).result;var g=f.map(function(a){return a.url+" "+a.width+"w"}).join(", ");d.setAttribute("srcset",g)}};addEventListener("lazybeforeunveil",function(a){var b,c,d="function"==typeof(a.target||{}).getAttribute&&a.target.getAttribute("data-bgset");!d&&a.target.classList&&a.target.classList.contains("lazyload-background")&&(d=a.target.getAttribute("data-srcset"),a.target.setAttribute("data-bgset",d),a.target.removeAttribute("data-srcset")),!a.defaultPrevented&&d&&(c=a.target,b=document.createElement("img"),b.alt="",b._lazybgsetLoading=!0,a.detail.firesLoad=!0,h(d,c,b),setTimeout(function(){lazySizes.loader.unveil(b),lazySizes.rAF(function(){lazySizes.fire(b,"_lazyloaded",{},!0,!0),b.complete&&b.naturalWidth>1&&i({target:b})})}))}),document.addEventListener("load",i,!0),window.addEventListener("lazybeforesizes",function(a){if(a.target._lazybgset&&a.detail.dataAttr){var b=a.target._lazybgset,c=g(b);e[c]&&(a.target._lazysizesParentFit=c,lazySizes.rAF(function(){a.target.setAttribute("data-parent-fit",c),a.target._lazysizesParentFit&&delete a.target._lazysizesParentFit}))}},!0),document.documentElement.addEventListener("lazybeforesizes",function(a){var b=a.target.closest("picture")&&a.target.closest(".lazyload-background");!a.defaultPrevented&&b&&(a.detail.width=a.detail.width||f(b),j(b,a.detail.width))})}}();